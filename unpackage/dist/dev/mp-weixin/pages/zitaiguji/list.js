(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/zitaiguji/list"],{311:function(e,n,t){"use strict";(function(e,n){var a=t(4);t(26);a(t(25));var i=a(t(312));e.__webpack_require_UNI_MP_PLUGIN__=t,n(i.default)}).call(this,t(1)["default"],t(2)["createPage"])},312:function(e,n,t){"use strict";t.r(n);var a=t(313),i=t(315);for(var r in i)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(r);t(317);var c,s=t(32),o=Object(s["default"])(i["default"],a["render"],a["staticRenderFns"],!1,null,"956302e8",null,!1,a["components"],c);o.options.__file="pages/zitaiguji/list.vue",n["default"]=o.exports},313:function(e,n,t){"use strict";t.r(n);var a=t(314);t.d(n,"render",(function(){return a["render"]})),t.d(n,"staticRenderFns",(function(){return a["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return a["recyclableRender"]})),t.d(n,"components",(function(){return a["components"]}))},314:function(e,n,t){"use strict";var a;t.r(n),t.d(n,"render",(function(){return i})),t.d(n,"staticRenderFns",(function(){return c})),t.d(n,"recyclableRender",(function(){return r})),t.d(n,"components",(function(){return a}));var i=function(){var e=this,n=e.$createElement,t=(e._self._c,e.selectedExercise&&e.exerciseFeedback&&void 0!==e.exerciseFeedback.elbow_angle?e.exerciseFeedback.elbow_angle.toFixed(2):null);e.$mp.data=Object.assign({},{$root:{g0:t}})},r=!1,c=[];i._withStripped=!0},315:function(e,n,t){"use strict";t.r(n);var a=t(316),i=t.n(a);for(var r in a)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(r);n["default"]=i.a},316:function(e,n,t){"use strict";(function(e){var a=t(4);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=a(t(57)),r=a(t(59)),c={data:function(){return{exercises:[{id:"curl",name:"弯曲检测"},{id:"high-knee",name:"高抬腿检测"},{id:"jump",name:"跳跃检测"},{id:"jumping-jack",name:"开合跳检测"},{id:"lunge",name:"弓步检测"},{id:"plank",name:"平板支撑检测"},{id:"push-up",name:"俯卧撑检测"},{id:"sit-up",name:"仰卧起坐检测"}],selectedExercise:null,exerciseFeedback:null,imageBase64:null,intervalId:null,baseUrl:"http://192.168.137.76:5000"}},methods:{selectExercise:function(n){var t=this;return(0,r.default)(i.default.mark((function a(){return i.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.selectedExercise=n;try{t.startExerciseAnalysis()}catch(i){console.error("摄像头初始化失败",i),e.showToast({title:"摄像头启动失败",icon:"none"})}case 2:case"end":return a.stop()}}),a)})))()},startExerciseAnalysis:function(){var n=this,t=e.createCameraContext();this.intervalId=setInterval((function(){t.takePhoto({quality:"low",success:function(t){e.getFileSystemManager().readFile({filePath:t.tempImagePath,encoding:"base64",success:function(e){var t=e.data;n.sendFrameToBackend(t)},fail:function(e){console.error("读取图片失败",e)}})},fail:function(e){console.error("拍照失败",e)}})}),100)},sendFrameToBackend:function(n){var t=this,a="".concat(this.baseUrl,"/pose_estimation/").concat(this.selectedExercise.id),i={Token:e.getStorageSync("appToken")},r=Object.assign({"Content-Type":"application/json"},i);new Promise((function(t,i){e.request({url:a,method:"POST",data:{image:n},header:r,dataType:"json",complete:function(n){var a=n.statusCode;if(200===a){var r=n.data;0===r.code?t(r):(e.showToast({title:r.msg,icon:"none",duration:2e3}),i(r))}else e.showToast({title:"接口执行异常",icon:"none",duration:2e3}),i(n)}})})).then((function(e){t.imageBase64=e.data.image,t.exerciseFeedback={elbow_angle:e.data.exercise_results.elbow_angle,feedback:e.data.exercise_results.feedback||["无反馈信息"]}})).catch((function(n){console.error("分析失败:",n),e.showToast({title:"分析失败",icon:"none"})}))},stopExercise:function(){clearInterval(this.intervalId),this.intervalId=null,this.selectedExercise=null,this.exerciseFeedback=null,this.imageBase64=null}}};n.default=c}).call(this,t(2)["default"])},317:function(e,n,t){"use strict";t.r(n);var a=t(318),i=t.n(a);for(var r in a)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(r);n["default"]=i.a},318:function(e,n,t){}},[[311,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/zitaiguji/list.js.map