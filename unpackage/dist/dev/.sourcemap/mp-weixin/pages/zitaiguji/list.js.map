{"version":3,"sources":["uni-app:///main.js","webpack:///D:/Others/desktop/工程管理/024_springboot健身房管理平台小程序/健身房管理平台_7249o6h7/springboot7249o6h7/src/main/resources/front/front/pages/zitaiguji/list.vue?9f42","webpack:///D:/Others/desktop/工程管理/024_springboot健身房管理平台小程序/健身房管理平台_7249o6h7/springboot7249o6h7/src/main/resources/front/front/pages/zitaiguji/list.vue?0922","webpack:///D:/Others/desktop/工程管理/024_springboot健身房管理平台小程序/健身房管理平台_7249o6h7/springboot7249o6h7/src/main/resources/front/front/pages/zitaiguji/list.vue?4c3b","webpack:///D:/Others/desktop/工程管理/024_springboot健身房管理平台小程序/健身房管理平台_7249o6h7/springboot7249o6h7/src/main/resources/front/front/pages/zitaiguji/list.vue?87d7","uni-app:///pages/zitaiguji/list.vue","webpack:///D:/Others/desktop/工程管理/024_springboot健身房管理平台小程序/健身房管理平台_7249o6h7/springboot7249o6h7/src/main/resources/front/front/pages/zitaiguji/list.vue?ccb4"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","g0","_self","_c","selectedExercise","exerciseFeedback","undefined","elbow_angle","toFixed","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","exercises","id","name","imageBase64","intervalId","baseUrl","methods","selectExercise","console","uni","title","icon","startExerciseAnalysis","cameraContext","quality","success","filePath","encoding","fail","sendFrameToBackend","Token","url","method","image","header","dataType","complete","resolve","duration","reject","then","feedback","catch","stopExercise","clearInterval"],"mappings":"+IAAA,MAGA,aACA,YAFAA,EAAGC,kCAAoCC,EAGvCC,EAAWC,a,gFCLX,oIACIC,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,2BACZ,aAAAF,E,0CCvBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GAEfN,EAAIO,kBACNP,EAAIQ,uBACiCC,IAArCT,EAAIQ,iBAAiBE,YACjBV,EAAIQ,iBAAiBE,YAAYC,QAAQ,GACzC,MACNX,EAAIY,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLZ,GAAIA,MAKRa,GAAmB,EACnBC,EAAkB,GACtBnB,EAAOoB,eAAgB,G,iCCtBvB,yHAAktB,eAAG,G,uJCoCrtB,CACAN,gBACA,OACAO,WACA,CAAAC,UAAAC,aACA,CAAAD,eAAAC,cACA,CAAAD,UAAAC,aACA,CAAAD,kBAAAC,cACA,CAAAD,WAAAC,aACA,CAAAD,WAAAC,eACA,CAAAD,aAAAC,cACA,CAAAD,YAAAC,gBAEAf,sBACAC,sBACAe,iBACAC,gBACAC,uCAIAC,SACAC,2BAAA,oIACA,qBACA,IACA,0BACA,SACAC,4BACAC,aAAAC,gBAAAC,cACA,0CAPA,IAUAC,iCAAA,WACA,0BACA,wCACAC,aACAC,cACAC,oBACAN,mCACAO,yBACAC,kBACAF,oBACA,aACA,yBAEAG,iBACAV,8BAIAU,iBACAV,6BAGA,MAGAW,+BAAA,WACA,+EACA,GAAAC,oCACA,uDAEA,2BACAX,WACAY,MACAC,cACA7B,MAAA8B,SACAC,SACAC,gBACAC,qBACA,mBACA,YACA,aACA,WACAC,MAEAlB,aAAAC,YAAAC,YAAAiB,eACAC,WAGApB,aAAAC,eAAAC,YAAAiB,eACAC,WAKAC,kBAGA,2BAGA,oBACAxC,gDACAyC,yDAGAC,mBACAxB,yBACAC,aAAAC,aAAAC,kBAIAsB,wBACAC,+BACA,qBACA,2BACA,2BACA,yBAGA,c,6DCnJA,yHAAoiC,eAAG,G","file":"pages/zitaiguji/list.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/zitaiguji/list.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./list.vue?vue&type=template&id=956302e8&scoped=true&\"\nvar renderjs\nimport script from \"./list.vue?vue&type=script&lang=js&\"\nexport * from \"./list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./list.vue?vue&type=style&index=0&id=956302e8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\DevTools\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"956302e8\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/zitaiguji/list.vue\"\nexport default component.exports","export * from \"-!E:\\\\DevTools\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\DevTools\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\DevTools\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\DevTools\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\DevTools\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\DevTools\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./list.vue?vue&type=template&id=956302e8&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 =\n    !!_vm.selectedExercise &&\n    _vm.exerciseFeedback &&\n    _vm.exerciseFeedback.elbow_angle !== undefined\n      ? _vm.exerciseFeedback.elbow_angle.toFixed(2)\n      : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\DevTools\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\DevTools\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!E:\\\\DevTools\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\DevTools\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\DevTools\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\DevTools\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\DevTools\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!E:\\\\DevTools\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\DevTools\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\DevTools\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./list.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"exercise-selection-container\" v-if=\"!selectedExercise\">\n    <view class=\"exercise-title\">选择你的动作</view>\n    <view class=\"exercise-grid\">\n      <view\n        class=\"exercise-card\"\n        v-for=\"exercise in exercises\"\n        :key=\"exercise.id\"\n        @tap=\"selectExercise(exercise)\"\n      >\n        <view class=\"exercise-name\">{{ exercise.name }}</view>\n      </view>\n    </view>\n  </view>\n\n  <view class=\"exercise-display-container\" v-else>\n    <view class=\"selected-exercise-name\">{{ selectedExercise.name }}</view>\n    <camera id=\"camera\" device-position=\"front\" flash=\"off\" style=\"width: 100%; height: 500rpx;\" />\n\n    <!-- 显示返回的图片 -->\n    <view v-if=\"imageBase64\" class=\"result-image-container\">\n      <image :src=\"'data:image/jpeg;base64,' + imageBase64\" style=\"width: 100%; height: 500rpx;\" />\n    </view>\n\n    <view v-if=\"exerciseFeedback\" class=\"exercise-result\">\n      <view>分析结果：</view>\n      <template v-if=\"exerciseFeedback.elbow_angle !== undefined\">\n        <view>肘部角度: {{ exerciseFeedback.elbow_angle.toFixed(2) }}°</view>\n      </template>\n    </view>\n\n    <button @tap=\"stopExercise\" class=\"stop-button\">结束动作</button>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      exercises: [\n        { id: 'curl', name: '弯曲检测' },\n        { id: 'high-knee', name: '高抬腿检测' },\n        { id: 'jump', name: '跳跃检测' },\n        { id: 'jumping-jack', name: '开合跳检测' },\n        { id: 'lunge', name: '弓步检测' },\n        { id: 'plank', name: '平板支撑检测' },\n        { id: 'push-up', name: '俯卧撑检测' },\n        { id: 'sit-up', name: '仰卧起坐检测' }\n      ],\n      selectedExercise: null,\n      exerciseFeedback: null,\n      imageBase64: null,  // 用于存储返回的Base64图像数据\n      intervalId: null,\n      baseUrl: 'http://192.168.137.76:5000'\n    };\n  },\n\n  methods: {\n    async selectExercise(exercise) {\n      this.selectedExercise = exercise;\n      try {\n        this.startExerciseAnalysis();\n      } catch (e) {\n        console.error('摄像头初始化失败', e);\n        uni.showToast({ title: '摄像头启动失败', icon: 'none' });\n      }\n    },\n\n    startExerciseAnalysis() {\n      const cameraContext = uni.createCameraContext();\n      this.intervalId = setInterval(() => {\n        cameraContext.takePhoto({\n          quality: 'low',\n          success: res => {\n            uni.getFileSystemManager().readFile({\n              filePath: res.tempImagePath,\n              encoding: 'base64',\n              success: fileRes => {\n                const frameDataUrl = fileRes.data;\n                this.sendFrameToBackend(frameDataUrl);\n              },\n              fail: err => {\n                console.error('读取图片失败', err);\n              }\n            });\n          },\n          fail: err => {\n            console.error('拍照失败', err);\n          }\n        });\n      }, 100); // 每秒拍一帧\n    },\n\n    sendFrameToBackend(base64Image) {\n      const url = `${this.baseUrl}/pose_estimation/${this.selectedExercise.id}`;\n      const token = { Token: uni.getStorageSync(\"appToken\") };\n      const header = Object.assign({ 'Content-Type': 'application/json' }, token);\n\n      new Promise((resolve, reject) => {\n        uni.request({\n          url,\n          method: 'POST',\n          data: { image: base64Image },\n          header: header,\n          dataType: 'json',\n          complete: (response) => {\n            const statusCode = response.statusCode;\n            if (statusCode === 200) {\n              const rs = response.data;\n              if (rs.code === 0) {\n                resolve(rs);\n              } else {\n                uni.showToast({ title: rs.msg, icon: 'none', duration: 2000 });\n                reject(rs);\n              }\n            } else {\n              uni.showToast({ title: '接口执行异常', icon: 'none', duration: 2000 });\n              reject(response);\n            }\n          }\n        });\n      })\n      .then(res => {\r\n\n        // 处理返回的图片Base64数据\n        this.imageBase64 = res.data.image;  // 假设接口返回字段为 image_base64\n        // console.log(\"返回的base64：\", this.imageBase64);\n        // 设置反馈信息\n        this.exerciseFeedback = {\n          elbow_angle: res.data.exercise_results.elbow_angle,\n          feedback: res.data.exercise_results.feedback || [\"无反馈信息\"]\n        };\n      })\n      .catch(err => {\n        console.error('分析失败:', err);\n        uni.showToast({ title: '分析失败', icon: 'none' });\n      });\n    },\n\n    stopExercise() {\n      clearInterval(this.intervalId);\n      this.intervalId = null;\n      this.selectedExercise = null;\n      this.exerciseFeedback = null;\n      this.imageBase64 = null;  // 清空图像\n    }\n  }\n};\n</script>\n\n<style scoped>\n.exercise-selection-container {\n  text-align: center;\n  padding: 20px;\n}\n.exercise-title {\n  font-size: 24px;\n  font-weight: bold;\n  margin-bottom: 20px;\n}\n.exercise-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n  gap: 16px;\n}\n.exercise-card {\n  background-color: #fff;\n  border: 1px solid #ccc;\n  padding: 12px;\n  border-radius: 8px;\n}\n.exercise-name {\n  font-size: 18px;\n}\n.exercise-display-container {\n  padding: 20px;\n}\n.result-image-container {\n  margin-top: 20px;\n}\n.exercise-result {\n  background-color: #f6f6f6;\n  margin-top: 12px;\n  padding: 10px;\n  border-radius: 6px;\n  word-break: break-all;\n}\n.stop-button {\n  margin-top: 20px;\n  background-color: #f44336;\n  color: white;\n  padding: 10px;\n  border-radius: 6px;\n  border: none;\n}\n</style>\n","import mod from \"-!E:\\\\DevTools\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\DevTools\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\DevTools\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\DevTools\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\DevTools\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\DevTools\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\DevTools\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./list.vue?vue&type=style&index=0&id=956302e8&scoped=true&lang=css&\"; export default mod; export * from \"-!E:\\\\DevTools\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\DevTools\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\DevTools\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\DevTools\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\DevTools\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\DevTools\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\DevTools\\\\Hbuilder\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./list.vue?vue&type=style&index=0&id=956302e8&scoped=true&lang=css&\""],"sourceRoot":""}